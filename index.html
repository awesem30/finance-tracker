<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Finance Tracker</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f1115">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Finance Tracker">
<link rel="apple-touch-icon" href="icon-192.png">
<style>
  :root{--bg:#0f1115;--card:#171a21;--ink:#e6e8ef;--muted:#9aa3b2;--accent:#3aa0ff;--danger:#ff5d5d;--ok:#3ddc97;--warn:#ffce3a;--border:#222836}
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";color:var(--ink);background:linear-gradient(180deg,#0c0e13,#0f1115 30%)}
  header{padding:calc(10px + env(safe-area-inset-top)) 16px 12px;border-bottom:1px solid var(--border);display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap;position:sticky;top:0;background:rgba(15,17,21,.85);backdrop-filter:blur(6px)}
  h1{font-size:17px;margin:0;font-weight:800;letter-spacing:.2px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  button,select,input{background:#0d1117;border:1px solid var(--border);color:var(--ink);padding:10px 12px;border-radius:12px;font-size:16px;outline:none}
  button{background:var(--accent);border-color:transparent;color:#081018;font-weight:800;cursor:pointer}
  button.ghost{background:#0d1117;color:var(--ink);border-color:var(--border);font-weight:700}
  button.danger{background:var(--danger);color:#111}
  main{padding:14px;max-width:1100px;margin:0 auto}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
  .card{grid-column:span 12;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:12px}
  @media(min-width:760px){.span-6{grid-column:span 6} .span-4{grid-column:span 4} .span-3{grid-column:span 3}}
  .section-title{margin:0 0 6px 0;font-size:12px;color:var(--muted);font-weight:800;text-transform:uppercase;letter-spacing:.12em}
  .balances{display:grid;grid-template-columns:repeat(12,1fr);gap:10px}
  .stat{grid-column:span 12;background:#111420;border:1px solid var(--border);border-radius:12px;padding:12px}
  .stat h3{margin:0 0 2px 0;font-size:12px;color:var(--muted);font-weight:700}
  .stat .val{font-size:22px;font-weight:900}
  @media(min-width:760px){.stat{grid-column:span 3} .stat.span-6{grid-column:span 6}}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .row > *{flex:1 1 180px}
  .hint{font-size:12px;color:var(--muted)}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px dashed var(--border);font-size:13px}
  th{text-align:left;color:var(--muted);font-weight:800}
  .right{text-align:right}
  .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#0d1117;border:1px solid var(--border);font-size:12px}
  .muted{color:var(--muted)}
  details{margin-top:8px}
  details summary{cursor:pointer;color:var(--muted);font-weight:700}
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
  .modal.show{display:flex}
  .modal .sheet{background:var(--card);border:1px solid var(--border);border-radius:16px;max-width:760px;width:100%;padding:16px}
  .sheet h2{margin:0 0 8px 0;font-size:18px}
  .flex-end{display:flex;justify-content:flex-end;gap:8px;margin-top:10px}
  .nowrap{white-space:nowrap}
  .ver{font-size:12px;color:var(--muted)}
</style>
</head>
<body>
<header>
  <h1>Finance Tracker <span class="ver" id="appVer"></span></h1>
  <div class="toolbar">
    <button class="ghost" id="btnUpdate">Update app</button>
    <button class="ghost" id="btnBalances">Balances</button>
    <button class="ghost" id="btnExport">Export CSV</button>
    <button class="danger" id="btnReset">Erase</button>
  </div>
</header>
<main>
  <div class="grid">
    <section class="card span-6">
      <h3 class="section-title">Money on hand</h3>
      <div class="balances" id="fundsStats"></div>
    </section>

    <section class="card span-6">
      <h3 class="section-title">Payables</h3>
      <div class="balances" id="debtStats"></div>
    </section>

    <section class="card span-6">
      <h3 class="section-title">Income / Deposit to fund</h3>
      <div class="row">
        <select id="incomeFund">
          <option value="GCash">GCash</option>
          <option value="UnionBank">UnionBank</option>
          <option value="Cash">Cash</option>
        </select>
        <input id="incomeLabel" type="text" placeholder="Label (e.g., allowance, gift, deposit)">
        <input id="incomeAmt" type="number" step="0.01" min="0" placeholder="Amount">
        <button id="incomeDo">Record</button>
      </div>
      <div class="hint">Examples: cash received, UnionBank deposit, money sent to GCash.</div>
    </section>

    <section class="card span-6">
      <h3 class="section-title">Transfer between funds</h3>
      <div class="row">
        <select id="tfFrom">
          <option value="GCash">GCash</option>
          <option value="UnionBank">UnionBank</option>
          <option value="Cash">Cash</option>
        </select>
        <select id="tfTo">
          <option value="UnionBank">UnionBank</option>
          <option value="GCash">GCash</option>
          <option value="Cash">Cash</option>
        </select>
        <input id="tfLabel" type="text" placeholder="Label (optional)">
        <input id="tfAmt" type="number" step="0.01" min="0" placeholder="Amount">
        <button id="tfDo">Record</button>
      </div>
      <div class="hint">Moves money without changing the grand total.</div>
    </section>

    <section class="card span-6">
      <h3 class="section-title">Spend from source of funds</h3>
      <div class="row">
        <select id="spendFund">
          <option value="GCash">GCash</option>
          <option value="UnionBank">UnionBank</option>
          <option value="Cash">Cash</option>
        </select>
        <input id="spendFundLabel" type="text" placeholder="Label (e.g., groceries)">
        <input id="spendFundAmt" type="number" step="0.01" min="0" placeholder="Amount">
        <button id="spendFundDo">Record</button>
      </div>
      <div class="hint">Press Enter in amount to record.</div>
    </section>

    <section class="card span-6">
      <h3 class="section-title">Spend on credit</h3>
      <div class="row">
        <select id="spendCredit">
          <option value="UB_CC">UnionBank Credit Card</option>
          <option value="PNB_CC">PNB Credit Card</option>
          <option value="GCredit">GCredit</option>
        </select>
        <input id="spendCreditLabel" type="text" placeholder="Label (e.g., appliances)">
        <input id="spendCreditAmt" type="number" step="0.01" min="0" placeholder="Amount">
        <button id="spendCreditDo">Record</button>
      </div>
      <div class="hint">Increases your payables.</div>
    </section>

    <section class="card span-6">
      <h3 class="section-title">Borrow cash</h3>
      <div class="row">
        <input id="borrowLabel" type="text" placeholder="From whom or note">
        <input id="borrowAmt" type="number" step="0.01" min="0" placeholder="Amount">
        <button id="borrowDo">Record</button>
      </div>
      <div class="hint">Adds to <span class="pill">Cash</span> and to <span class="pill">Cash Borrowed</span>.</div>
    </section>

    <section class="card span-6">
      <h3 class="section-title">Make a payment</h3>
      <div class="row">
        <select id="payWhichDebt">
          <option value="UB_CC">UnionBank Credit Card</option>
          <option value="PNB_CC">PNB Credit Card</option>
          <option value="GCredit">GCredit</option>
          <option value="CashBorrowed">Cash Borrowed</option>
        </select>
        <select id="payFromFund">
          <option value="GCash">GCash</option>
          <option value="UnionBank">UnionBank</option>
          <option value="Cash">Cash</option>
        </select>
        <input id="payAmt" type="number" step="0.01" min="0" placeholder="Amount">
        <button id="payDo">Record</button>
      </div>
      <div class="hint">Reduces the selected payable and the chosen source balance.</div>
    </section>

    <section class="card span-12">
      <h3 class="section-title">Transactions</h3>
      <details id="txToggle" open>
        <summary>Show / hide log</summary>
        <table id="txTable">
          <thead>
            <tr>
              <th>Date &amp; Time</th>
              <th>Type</th>
              <th>Account</th>
              <th>Label</th>
              <th class="right">Amount</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </details>
    </section>
  </div>
</main>

<!-- Modal: Starting balances -->
<div class="modal" id="balancesModal" role="dialog" aria-modal="true" aria-labelledby="balancesTitle">
  <div class="sheet">
    <h2 id="balancesTitle">Set starting balances</h2>
    <p class="muted">Amounts you have now and what you already owe. Data stays on this device.</p>
    <div class="grid">
      <div class="card">
        <h3 class="section-title">Money on hand</h3>
        <div class="grid">
          <div class="span-4">
            <label for="init_GCash">GCash</label>
            <input id="init_GCash" type="number" step="0.01" min="0">
          </div>
          <div class="span-4">
            <label for="init_UnionBank">UnionBank</label>
            <input id="init_UnionBank" type="number" step="0.01" min="0">
          </div>
          <div class="span-4">
            <label for="init_Cash">Cash</label>
            <input id="init_Cash" type="number" step="0.01" min="0">
          </div>
        </div>
      </div>

      <div class="card">
        <h3 class="section-title">Payables</h3>
        <div class="grid">
          <div class="span-3">
            <label for="init_UB_CC">UnionBank CC</label>
            <input id="init_UB_CC" type="number" step="0.01" min="0">
          </div>
          <div class="span-3">
            <label for="init_PNB_CC">PNB CC</label>
            <input id="init_PNB_CC" type="number" step="0.01" min="0">
          </div>
          <div class="span-3">
            <label for="init_GCredit">GCredit</label>
            <input id="init_GCredit" type="number" step="0.01" min="0">
          </div>
          <div class="span-3">
            <label for="init_CashBorrowed">Cash Borrowed</label>
            <input id="init_CashBorrowed" type="number" step="0.01" min="0">
          </div>
        </div>
      </div>
    </div>
    <div class="flex-end">
      <button class="ghost" id="balancesCancel">Cancel</button>
      <button id="balancesSave">Save</button>
    </div>
  </div>
</div>

<script>
(function(){
  const APP_VERSION = '1.0.1-fix';
  document.getElementById('appVer').textContent = APP_VERSION;

  // Service worker registration + update button
  let swReg = null;
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js?ver=' + APP_VERSION).then(reg => {
        swReg = reg;
      }).catch(console.warn);
    });
  }
  document.getElementById('btnUpdate').addEventListener('click', async () => {
    try{
      // Force-claim new SW and clear old caches
      if (swReg) { await swReg.update(); }
      const keys = await caches.keys();
      await Promise.all(keys.map(k => caches.delete(k)));
      if (navigator.serviceWorker && navigator.serviceWorker.controller) {
        navigator.serviceWorker.controller.postMessage({type:'SKIP_WAITING'});
      }
    }catch(e){}
    location.reload(true);
  });

  const CURRENCY = new Intl.NumberFormat('en-PH', { style:'currency', currency:'PHP', maximumFractionDigits:2 });
  const LS_KEYS = { BAL:'fin_balances_pwa', DEBT:'fin_payables_pwa', TX:'fin_txns_pwa' };
  const defaultBalances = { GCash:0, UnionBank:0, Cash:0 };
  const defaultDebts = { UB_CC:0, PNB_CC:0, GCredit:0, CashBorrowed:0 };
  const pad=n=>String(n).padStart(2,'0');
  const fmtDate=iso=>{const d=new Date(iso);return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`};

  function load(key, fallback){try{const raw=localStorage.getItem(key);if(!raw) return structuredClone(fallback);const val=JSON.parse(raw);return Object.assign(structuredClone(fallback), val);}catch(e){return structuredClone(fallback);}}
  function save(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
  function nowISO(){ return new Date().toISOString(); }
  function fmt(n){ return CURRENCY.format(n); }

  let balances = load(LS_KEYS.BAL, defaultBalances);
  let debts = load(LS_KEYS.DEBT, defaultDebts);
  let tx = load(LS_KEYS.TX, []);

  const fundsStats = document.getElementById('fundsStats');
  const debtStats = document.getElementById('debtStats');

  const incomeFund = document.getElementById('incomeFund');
  const incomeLabel = document.getElementById('incomeLabel');
  const incomeAmt = document.getElementById('incomeAmt');
  const incomeDo = document.getElementById('incomeDo');

  const tfFrom = document.getElementById('tfFrom');
  const tfTo = document.getElementById('tfTo');
  const tfLabel = document.getElementById('tfLabel');
  const tfAmt = document.getElementById('tfAmt');
  const tfDo = document.getElementById('tfDo');

  const spendFund = document.getElementById('spendFund');
  const spendFundLabel = document.getElementById('spendFundLabel');
  const spendFundAmt = document.getElementById('spendFundAmt');
  const spendFundDo = document.getElementById('spendFundDo');

  const spendCreditSel = document.getElementById('spendCredit');
  const spendCreditLabel = document.getElementById('spendCreditLabel');
  const spendCreditAmt = document.getElementById('spendCreditAmt');
  const spendCreditDo = document.getElementById('spendCreditDo');

  const borrowLabel = document.getElementById('borrowLabel');
  const borrowAmt = document.getElementById('borrowAmt');
  const borrowDo = document.getElementById('borrowDo');

  const payWhichDebt = document.getElementById('payWhichDebt');
  const payFromFund = document.getElementById('payFromFund');
  const payAmt = document.getElementById('payAmt');
  const payDo = document.getElementById('payDo');

  const txTableBody = document.querySelector('#txTable tbody');

  const balancesModal = document.getElementById('balancesModal');
  const btnBalances = document.getElementById('btnBalances');
  const btnExport = document.getElementById('btnExport');
  const btnReset = document.getElementById('btnReset');
  const balancesCancel = document.getElementById('balancesCancel');
  const balancesSave = document.getElementById('balancesSave');

  const initInputs = {
    GCash: document.getElementById('init_GCash'),
    UnionBank: document.getElementById('init_UnionBank'),
    Cash: document.getElementById('init_Cash'),
    UB_CC: document.getElementById('init_UB_CC'),
    PNB_CC: document.getElementById('init_PNB_CC'),
    GCredit: document.getElementById('init_GCredit'),
    CashBorrowed: document.getElementById('init_CashBorrowed'),
  };

  function statCard(label, val, extraClass=''){
    const div = document.createElement('div');
    div.className = 'stat ' + extraClass;
    div.innerHTML = `<h3>${label}</h3><div class="val">${fmt(val)}</div>`;
    return div;
  }

  function renderStats(){
    fundsStats.innerHTML = '';
    const totalFunds = (balances.GCash||0)+(balances.UnionBank||0)+(balances.Cash||0);
    fundsStats.appendChild(statCard('GCash', balances.GCash));
    fundsStats.appendChild(statCard('UnionBank', balances.UnionBank));
    fundsStats.appendChild(statCard('Cash', balances.Cash));
    fundsStats.appendChild(statCard('Grand total', totalFunds, 'span-6'));

    debtStats.innerHTML = '';
    const dUB = debts.UB_CC||0, dPNB = debts.PNB_CC||0, dGC = debts.GCredit||0, dCB = debts.CashBorrowed||0;
    const totalDebts = dUB + dPNB + dGC + dCB;
    debtStats.appendChild(statCard('UnionBank CC', dUB));
    debtStats.appendChild(statCard('PNB CC', dPNB));
    debtStats.appendChild(statCard('GCredit', dGC));
    debtStats.appendChild(statCard('Cash Borrowed', dCB));
    debtStats.appendChild(statCard('Grand total', totalDebts, 'span-6'));
  }

  function pushTx(entry){ tx.unshift(entry); save(LS_KEYS.TX, tx); }

  function renderTx(){
    txTableBody.innerHTML = '';
    for(const t of tx){
      const tr = document.createElement('tr');
      const dateStr = fmtDate(t.date);
      const acct = t.account2 ? `${t.account} â†’ ${t.account2}` : t.account;
      tr.innerHTML = `
        <td class="nowrap">${dateStr}</td>
        <td><span class="pill">${t.type}</span></td>
        <td>${acct}</td>
        <td class="muted">${t.label || ''}</td>
        <td class="right">${fmt(t.amount)}</td>`;
      txTableBody.appendChild(tr);
    }
  }

  function toNumber(input){
    const v = typeof input === 'string' ? input : input.value;
    const n = Number.parseFloat(v);
    if(!Number.isFinite(n) || n <= 0) return null;
    return Math.round(n * 100) / 100;
  }

  function recordIncome(){
    const fund = incomeFund.value;
    const amount = toNumber(incomeAmt);
    if(!amount){ alert('Enter a valid positive amount.'); return; }
    balances[fund] = Math.round(((balances[fund]||0) + amount) * 100)/100;
    save(LS_KEYS.BAL, balances);
    pushTx({date:new Date().toISOString(), type:'Income', account:fund, label:incomeLabel.value.trim(), amount});
    incomeLabel.value=''; incomeAmt.value='';
    renderStats(); renderTx();
  }

  function recordTransfer(){
    const from = tfFrom.value;
    const to = tfTo.value;
    if(from === to){ alert('Choose two different accounts.'); return; }
    const amount = toNumber(tfAmt);
    if(!amount){ alert('Enter a valid positive amount.'); return; }
    if((balances[from]||0) < amount){
      if(!confirm(`This will overdraw ${from}. Continue?`)) return;
    }
    balances[from] = Math.round(((balances[from]||0) - amount) * 100)/100;
    balances[to] = Math.round(((balances[to]||0) + amount) * 100)/100;
    save(LS_KEYS.BAL, balances);
    pushTx({date:new Date().toISOString(), type:'Transfer', account:from, account2:to, label:tfLabel.value.trim(), amount});
    tfLabel.value=''; tfAmt.value='';
    renderStats(); renderTx();
  }

  function recordSpendFund(){
    const fund = spendFund.value;
    const amount = toNumber(spendFundAmt);
    if(!amount){ alert('Enter a valid positive amount.'); return; }
    if((balances[fund]||0) < amount){
      if(!confirm(`This will overdraw ${fund}. Continue?`)) return;
    }
    balances[fund] = Math.round(((balances[fund]||0) - amount) * 100)/100;
    save(LS_KEYS.BAL, balances);
    pushTx({date:new Date().toISOString(), type:'Spend (fund)', account:fund, label:spendFundLabel.value.trim(), amount});
    spendFundLabel.value=''; spendFundAmt.value='';
    renderStats(); renderTx();
  }

  function recordSpendCredit(){
    const card = spendCreditSel.value;
    const amount = toNumber(spendCreditAmt);
    if(!amount){ alert('Enter a valid positive amount.'); return; }
    debts[card] = Math.round(((debts[card]||0) + amount) * 100)/100;
    save(LS_KEYS.DEBT, debts);
    pushTx({date:new Date().toISOString(), type:'Spend (credit)', account:pretty(card), label:spendCreditLabel.value.trim(), amount});
    spendCreditLabel.value=''; spendCreditAmt.value='';
    renderStats(); renderTx();
  }

  function recordBorrowCash(){
    const amount = toNumber(borrowAmt);
    if(!amount){ alert('Enter a valid positive amount.'); return; }
    balances.Cash = Math.round(((balances.Cash||0) + amount) * 100)/100;
    debts.CashBorrowed = Math.round(((debts.CashBorrowed||0) + amount) * 100)/100;
    save(LS_KEYS.BAL, balances); save(LS_KEYS.DEBT, debts);
    pushTx({date:new Date().toISOString(), type:'Borrow cash', account:'Cash Borrowed', account2:'Cash', label:borrowLabel.value.trim(), amount});
    borrowLabel.value=''; borrowAmt.value='';
    renderStats(); renderTx();
  }

  function recordPayment(){
    const which = payWhichDebt.value;
    const src = payFromFund.value;
    const amount = toNumber(payAmt);
    if(!amount){ alert('Enter a valid positive amount.'); return; }
    if((balances[src]||0) < amount){
      if(!confirm(`This will overdraw ${src}. Continue?`)) return;
    }
    balances[src] = Math.round(((balances[src]||0) - amount) * 100)/100;
    debts[which] = Math.max(0, Math.round(((debts[which]||0) - amount) * 100)/100));
    save(LS_KEYS.BAL, balances); save(LS_KEYS.DEBT, debts);
    pushTx({date:new Date().toISOString(), type:'Payment', account:pretty(src), account2:pretty(which), label:'', amount});
    payAmt.value='';
    renderStats(); renderTx();
  }

  function pretty(key){
    switch(key){
      case 'UB_CC': return 'UnionBank CC';
      case 'PNB_CC': return 'PNB CC';
      case 'GCredit': return 'GCredit';
      case 'CashBorrowed': return 'Cash Borrowed';
      case 'GCash': return 'GCash';
      case 'UnionBank': return 'UnionBank';
      case 'Cash': return 'Cash';
      default: return key;
    }
  }

  // Modal handlers
  function openBalancesModal(){
    initInputs.GCash.value = balances.GCash ?? 0;
    initInputs.UnionBank.value = balances.UnionBank ?? 0;
    initInputs.Cash.value = balances.Cash ?? 0;
    initInputs.UB_CC.value = debts.UB_CC ?? 0;
    initInputs.PNB_CC.value = debts.PNB_CC ?? 0;
    initInputs.GCredit.value = debts.GCredit ?? 0;
    initInputs.CashBorrowed.value = debts.CashBorrowed ?? 0;
    balancesModal.classList.add('show');
  }
  function closeBalancesModal(){ balancesModal.classList.remove('show'); }
  function saveBalancesFromModal(){
    balances.GCash = Number(initInputs.GCash.value||0);
    balances.UnionBank = Number(initInputs.UnionBank.value||0);
    balances.Cash = Number(initInputs.Cash.value||0);
    debts.UB_CC = Number(initInputs.UB_CC.value||0);
    debts.PNB_CC = Number(initInputs.PNB_CC.value||0);
    debts.GCredit = Number(initInputs.GCredit.value||0);
    debts.CashBorrowed = Number(initInputs.CashBorrowed.value||0);
    save(LS_KEYS.BAL, balances); save(LS_KEYS.DEBT, debts);
    renderStats();
    closeBalancesModal();
  }

  function exportCSV(){
    const headers = ['date','type','account','account2','label','amount'];
    const lines = [headers.join(',')];
    for(const t of tx.slice().reverse()){
      const row = [t.date, t.type??'', t.account??'', t.account2??'', (t.label??'').replaceAll('\"','\"\"'), t.amount]
        .map(v=> '\"'+String(v)+'\"').join(',');
      lines.push(row);
    }
    const blob = new Blob([lines.join('\\n')], {type:'text/csv'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'transactions.csv';
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  }

  function resetAll(){
    if(!confirm('Erase all balances and transactions? This cannot be undone.')) return;
    balances = { GCash:0, UnionBank:0, Cash:0 };
    debts = { UB_CC:0, PNB_CC:0, GCredit:0, CashBorrowed:0 };
    tx = [];
    save(LS_KEYS.BAL, balances); save(LS_KEYS.DEBT, debts); save(LS_KEYS.TX, tx);
    renderStats(); renderTx();
  }

  document.getElementById('btnBalances').addEventListener('click', openBalancesModal);
  document.getElementById('balancesCancel').addEventListener('click', closeBalancesModal);
  document.getElementById('balancesSave').addEventListener('click', saveBalancesFromModal);
  document.getElementById('btnExport').addEventListener('click', exportCSV);
  document.getElementById('btnReset').addEventListener('click', resetAll);

  document.getElementById('incomeDo').addEventListener('click', recordIncome);
  document.getElementById('incomeAmt').addEventListener('keydown', e=>{ if(e.key==='Enter'){ recordIncome(); }});

  document.getElementById('tfDo').addEventListener('click', recordTransfer);
  document.getElementById('tfAmt').addEventListener('keydown', e=>{ if(e.key==='Enter'){ recordTransfer(); }});

  document.getElementById('spendFundDo').addEventListener('click', recordSpendFund);
  document.getElementById('spendFundAmt').addEventListener('keydown', e=>{ if(e.key==='Enter'){ recordSpendFund(); }});

  document.getElementById('spendCreditDo').addEventListener('click', recordSpendCredit);
  document.getElementById('spendCreditAmt').addEventListener('keydown', e=>{ if(e.key==='Enter'){ recordSpendCredit(); }});

  document.getElementById('borrowDo').addEventListener('click', recordBorrowCash);
  document.getElementById('borrowAmt').addEventListener('keydown', e=>{ if(e.key==='Enter'){ recordBorrowCash(); }});

  document.getElementById('payDo').addEventListener('click', recordPayment);
  document.getElementById('payAmt').addEventListener('keydown', e=>{ if(e.key==='Enter'){ recordPayment(); }});

  renderStats(); renderTx();
})();
</script>
</body>
</html>
